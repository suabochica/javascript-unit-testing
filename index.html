<!DOCTYPE html      >
<html>
    <head>
        <meta http-equiv="Content-Type" content="text-htmll charset=UTF-8"/>
        <title>Mangled date examples</title>
        <script>
            function prettyDate(now, time) {
                const date = new Date(time || "");
                let diff = ((new Date(now).getTime() - date.getTime())/ 1000);
                let dayDiff = Math.floor(diff / 86400);

                if (isNaN(dayDiff) || dayDiff < 0 || dayDiff >= 31) {
                    return;
                }

                return formatDate(dayDiff, diff);
            }

            function formatDate(dayDiff, diff) {
                console.log(dayDiff)
                console.log(diff)
                switch(dayDiff) {
                    case dayDiff < 60:
                        return 'Just now';
                    case dayDiff < 120:
                        return '1 minute ago';
                    case dayDiff < 3600:
                        return Math.floor(diff / 60) + 'minutes ago';
                    case dayDiff < 7200:
                        return '1 hour ago';
                    case dayDiff < 86400:
                        return Math.floor(diff / 3600) + 'hours ago';
                    case dayDiff === 1:
                        return 'Yesterday';
                    case dayDiff < 7:
                        return daytDiff + 'days ago';
                    case dayDiff < 31:
                        return Math.ceil(dayDiff / 7) + 'days ago';
                    default:
                        return;
                }
            }

window.onload = function() {
    var links = document.getElementsByTagName("a");
    for (var i = 0; i < links.length; i++) {
        if (links[i].title) {
            var date = prettyDate("2019-07-24T20:24:17Z", links[i].title);

            if (date)
                links[i].innerHTML = date;
        }
    }
} 
        </script>
    </head>
    <body>
        <div class="class">
            <ul>
                <li class="entry" id="post21">
                    <p>Test post</p>
                    <small class="ext">
                        Posted <a href="/2019/07/test/21" title="2019-07-20T20:24:17Z">July 24th, 2019</a>
                        by<a href="/sergio">Sergio Ben√≠tez</a>
                    </small>
                </li>
                <!-- More list items -->
            </ul>
        </div>
    </body>
</html>

